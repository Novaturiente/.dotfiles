# TLP Configuration for Lenovo Ideapad Slim 5
# Hardware: Intel Core Ultra 5 (Meteor Lake) | No dGPU
# Adjusted for battery life and balanced performance

# ------------------------------------------------------------------------------
# Processor (Intel Core Ultra / Intel P-State)
# ------------------------------------------------------------------------------

# Operation Mode
CPU_DRIVER_OPMODE_ON_AC=active
CPU_DRIVER_OPMODE_ON_BAT=active

# Governance
CPU_SCALING_GOVERNOR_ON_AC=performance
CPU_SCALING_GOVERNOR_ON_BAT=powersave

# Energy Performance Hints (EPP)
# balance_performance is good for AC, balance_power for Battery on Meteor Lake
CPU_ENERGY_PERF_POLICY_ON_AC=performance
CPU_ENERGY_PERF_POLICY_ON_BAT=balance_power

# Scaling Min/Max Frequencies (Optional, let the driver handle it usually)
# CPU_MIN_PERF_ON_AC=0
# CPU_MAX_PERF_ON_AC=100
# CPU_MIN_PERF_ON_BAT=0
# CPU_MAX_PERF_ON_BAT=100

# Turbo Boost
# Keep enabled on battery for responsiveness, scheduler handles it well now.
# Set to 0 if you need extreme battery saving.
CPU_BOOST_ON_AC=1
CPU_BOOST_ON_BAT=1

# Intel CPU HWP Dynamic Boost
CPU_HWP_DYN_BOOST_ON_AC=1
CPU_HWP_DYN_BOOST_ON_BAT=0

# ------------------------------------------------------------------------------
# Platform / ACPI
# ------------------------------------------------------------------------------

PLATFORM_PROFILE_ON_AC=performance
PLATFORM_PROFILE_ON_BAT=low-power

# S0ix (Modern Standby) optimization
MEM_SLEEP_ON_AC=s2idle
MEM_SLEEP_ON_BAT=s2idle

# ------------------------------------------------------------------------------
# Battery Charge Thresholds (Lenovo/ThinkPad/IdeaPad)
# ------------------------------------------------------------------------------

# Lenovo laptops usually support thresholds via natacpi or tpacpi-bat
# Conservation mode (approx 60% or 80%) is common.
# Setting explicit thresholds:
NATACPI_ENABLE=1
START_CHARGE_THRESH_BAT0=75
STOP_CHARGE_THRESH_BAT0=80

# ------------------------------------------------------------------------------
# Graphics
# ------------------------------------------------------------------------------

# Intel GPU Frequency (optional, comment out to let driver decide)
# INTEL_GPU_MIN_FREQ_ON_AC=300
# INTEL_GPU_MAX_FREQ_ON_AC=1300
# INTEL_GPU_MIN_FREQ_ON_BAT=300
# INTEL_GPU_MAX_FREQ_ON_BAT=800

# ------------------------------------------------------------------------------
# Network & Radio
# ------------------------------------------------------------------------------

WIFI_PWR_ON_AC=off
WIFI_PWR_ON_BAT=on
WOL_DISABLE=Y

# ------------------------------------------------------------------------------
# Runtime Power Management
# ------------------------------------------------------------------------------

RUNTIME_PM_ON_AC=on
RUNTIME_PM_ON_BAT=auto

# Wireless devices
PCIE_ASPM_ON_AC=default
PCIE_ASPM_ON_BAT=powersupersave

# ------------------------------------------------------------------------------
# USB
# ------------------------------------------------------------------------------

USB_AUTOSUSPEND=1
USB_EXCLUDE_PHONE=1
# Add IDs to exclude here if needed
USB_DENYLIST=""

# ------------------------------------------------------------------------------
# Audio
# ------------------------------------------------------------------------------

SOUND_POWER_SAVE_ON_AC=0
SOUND_POWER_SAVE_ON_BAT=10
SOUND_POWER_SAVE_CONTROLLER=Y

# ------------------------------------------------------------------------------
# Disk
# ------------------------------------------------------------------------------
DISK_IOSCHED="mq-deadline mq-deadline"
AHCI_RUNTIME_PM_ON_AC=on
AHCI_RUNTIME_PM_ON_BAT=auto

